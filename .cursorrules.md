# ============================================================
# SKBZ/CMH RAWALAKOT PHARMACY  
# Cursor AI Rules — Read this before generating any code
# ============================================================ 
 
## PROJECT IDENTITY
Name: SKBZ/CMH RAWALAKOT PHARMACY
Type: Desktop application (Windows)
Purpose: Complete pharmacy management — inventory, billing, reports, suppliers
 
## TECH STACK (strictly follow this, never suggest alternatives)
- Runtime:      Electron.js (desktop wrapper)
- Frontend:     React 18 + TypeScript (strict mode)
- Build:        electron-vite + Vite
- UI Library:   Ant Design v5 (antd) — use ONLY antd components
- Icons:        @ant-design/icons
- Database:     SQLite via better-sqlite3 (synchronous, local file)
- ORM:          Drizzle ORM with drizzle-kit for migrations
- State:        Zustand (lightweight, no Redux)
- Dates:        dayjs (always import, never use native Date for display)
- Charts:       Recharts
- Excel Export: xlsx (SheetJS)
- PDF Export:   jsPDF + jspdf-autotable
- Passwords:    bcryptjs
- Zip/Backup:   archiver
 
## ARCHITECTURE RULES
- NEVER query the database directly from React components
- ALL database calls go through Electron IPC handlers in electron/ipc/
- IPC channel naming: 'module:action' (e.g. 'medicines:getAll', 'billing:create')
- Preload bridge in electron/preload.ts exposes window.api to React
- React calls window.api.invoke('channel:name', data) — never ipcRenderer directly
- Zustand stores live in src/store/ — one store per major module
- All DB query functions live in src/db/queries/ — one file per module
- Drizzle schema lives in src/db/schema.ts
- Reusable UI components live in src/components/
- Each page/module has its own folder under src/pages/
 
## CODING STANDARDS
- Always use TypeScript with strict types — NEVER use 'any'
- All components are functional with React hooks
- Always handle loading and error states in every component
- Wrap all async IPC calls in try/catch with user-friendly error messages
- Use Ant Design Form for all forms with proper validation rules
- Use Ant Design Table for all data lists with pagination (20 per page default)
- Use Ant Design notification (top-right) for success/error feedback
- Use Ant Design Modal for all popups and confirmations
- Use Ant Design Skeleton for loading states
- Add JSDoc comments to all exported functions
 
## DESIGN SYSTEM
Primary Color:   #1A56DB (blue)  — buttons, active states, links
Success Color:   #059669 (green) — stock OK, saved, success
Danger Color:    #DC2626 (red)   — expired, error, delete
Warning Color:   #D97706 (amber) — expiring soon, low stock
Dark Text:       #111827
Medium Text:     #374151
Muted Text:      #6B7280
Background:      #F9FAFB
Font:            -apple-system, 'Segoe UI', Arial (system default via Ant Design)
refer top pharmacy designs from:https://dribbble.com/search/pharmacy-dashboard
 
## BUSINESS RULES
- Currency: Pakistani Rupees. Format: 'Rs. 1,234.00' or 'PKR 1,234'
- Date format throughout app: DD/MM/YYYY
- Stock is ALWAYS updated through stock_transactions table, never directly
- Passwords are ALWAYS hashed with bcrypt before storing
- Deleted records are soft-deleted (is_deleted = true), never hard deleted
- Medicine quantities are always whole numbers (integers)
- Prices are stored as integers in paisa (multiply by 100), displayed divided by 100
 
## EXPIRY COLOR RULES
Expired:              background #FEF2F2, text #DC2626 (red)
Expiring < 30 days:   background #FFFBEB, text #D97706 (orange)
Expiring < 90 days:   background #FEFCE8, text #CA8A04 (yellow)
OK:                   background #ECFDF5, text #059669 (green)
 
## FOLDER STRUCTURE (do not deviate from this)
skbz-cmh-rawalakot-pharmacy/
  electron/
    main.ts          — Electron entry, window creation, IPC setup
    preload.ts       — contextBridge, exposes window.api
    ipc/             — one file per module: medicines.ts, billing.ts, etc.
  src/
    components/      — reusable: AppLayout, PageHeader, StatusBadge, etc.
    pages/           — Dashboard/, Auth/, Medicines/, Inventory/,
                       Suppliers/, Billing/, Prescriptions/, Reports/, Settings/
    store/           — authStore.ts, medicineStore.ts, etc.
    db/
      schema.ts      — all Drizzle table definitions
      queries/       — one file per module
    hooks/           — custom hooks: useMedicines.ts, useBilling.ts, etc.
    utils/           — formatCurrency.ts, formatDate.ts, expiryStatus.ts, etc.
    types/           — shared TypeScript type definitions
  public/            — static assets
  .cursorrules       — this file
  electron-builder.yml
  package.json
  tsconfig.json
  vite.config.ts